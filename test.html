<canvas id="canvas" width="500" height="500"></canvas>
<img id="image" src="test.png" style="display:none;">

<script>
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");
  const img = document.getElementById("image");

  img.onload = function() {
    // 이미지 그리기
    ctx.drawImage(img, 0, 0);
    // 픽셀 데이터 가져오기
    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    const data = imageData.data;

    // 흰색을 원하는 색상으로 변경
    const targetColor = { r: 255, g: 0, b: 0 }; // 원하는 색상 (예: 빨간색)
    const tolerance = 30; // 색상 허용 오차

    for (let i = 0; i < data.length; i += 4) {
      const r = data[i];
      const g = data[i + 1];
      const b = data[i + 2];

      // 흰색과 유사한 색상인지 확인
      if (isWithinTolerance(r, g, b, 255, tolerance)) {
        data[i] = targetColor.r;     // R
        data[i + 1] = targetColor.g; // G
        data[i + 2] = targetColor.b; // B
      }
    }

    // 변경된 데이터를 캔버스에 다시 그리기
    ctx.putImageData(imageData, 0, 0);
  };

  function isWithinTolerance(r1, g1, b1, r2, tolerance) {
    return Math.abs(r1 - r2) <= tolerance &&
           Math.abs(g1 - r2) <= tolerance &&
           Math.abs(b1 - r2) <= tolerance;
  }
</script>
